// Generated by CoffeeScript 1.10.0
(function() {
  var Map;

  Map = (function() {
    function Map() {
      this.map = {};
    }

    Map.prototype.addRole = function(role) {
      if (typeof role.getName !== 'function' || typeof role.isAllowed !== 'function') {
        throw new Error('You must add a Role object.');
      }
      if (this.hasRole(role.getName())) {
        throw new Error('Role already exists.');
      }
      this.map[role.getName()] = role;
      return this;
    };

    Map.prototype.hasRole = function(roleName) {
      return this.map.hasOwnProperty(roleName);
    };

    Map.prototype.checkRolePermission = function(path, method, roleName) {
      if (!this.hasRole(roleName)) {
        return false;
      } else {
        return this.map[roleName].isAllowed(path, method);
      }
    };

    Map.prototype.check = function(roleNameList, permission, method) {
      return roleNameList.map(this.checkRolePermission.bind(this, permission, method)).reduce(function(acc, cur) {
        return acc || cur;
      });
    };

    return Map;

  })();

  module.exports = function() {
    return new Map();
  };

}).call(this);
